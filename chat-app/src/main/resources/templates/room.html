<!DOCTYPE html>
<html lang="en">
<head th:replace="~{fragments/head :: head}"></head>
<body>
<div
  class="d-flex align-items-stretch vh-100"
  hx-ext="ws"
  th:ws-connect="|/ws/room/${room.id}|">
  <div
    th:hx-get="|/room/fragment/list?active=${room.id}|"
    hx-trigger="load"
    hx-swap="outerHTML">
  </div>
  <div class="flex-fill">
    <div class="d-flex flex-column vh-100">
      <div
        id="messages"
        class="d-flex flex-column-reverse flex-fill p-2 overflow-scroll"
        hx-swap-oob="afterbegin scroll:bottom">
        <div
          th:hx-get="|/message/fragment/list?roomId=${room.id}|"
          hx-trigger="load"
          hx-swap="outerHTML scroll:bottom">
        </div>
      </div>
      <form th:replace="~{fragments/message-form :: message-form(${room.id}, ${username})}">
      </form>
    </div>
  </div>
  <div
    hx-get="/user/fragment/list"
    hx-trigger="load, every 5s"
    hx-swap="outerHTML">
  </div>
</div>
<div th:replace="~{fragments/foot :: foot}"></div>
</body>
</html>